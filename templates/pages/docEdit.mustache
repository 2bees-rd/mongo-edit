<h2 class="title">{{collectionName}}/{{_id}}</h2>
<br><br>
<input id="save" class="btn" value="Save"><br>
<div id="editor" class="editor">{{doc}}</div>

<form id="postToRedirect" style="display: none;" method="post" action="/{{collectionName}}/{{_id}}">
  <input type="text" value="" name="newData">
</form>

<script>
  // Setting up editor
  var editor = ace.edit("editor");
  var JSONMode = require("ace/mode/json").Mode;
  editor.getSession().setMode(new JSONMode());

  // What to do on a save
  $('#save').on('click', function () {
    var newDoc = editor.getSession().getValue();
    $('#postToRedirect input[name=newData]').attr('value', newDoc);
    $('#postToRedirect').submit();
  });
</script>
